{"version":3,"file":"commonHelpers.js","sources":["../src/img/icon-error.png","../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEYSURBVHgBrZZRDoIwDIYrwfDqTeQo3ohxEr0BXsW77GXFOFdkYcC6DuFPCJB1/7fCWgBgZEzfIPY256BYzqfkzE8nUNbCE+DzgqSKK8W6OVBV5xYk+ZUbgw/IFMVKmfxtng3ZYy5CjjBnISlzrXUtGcZiZpDxolsGIWItvTi/OK0xAuk7GhsBRjEGioNMmffMXKNEAAeRzENACYJc8QxF5IuJNBZhS2PSfBGwhNB9rjmpgHxZ5jqprAyC3jT0mi29RwSE5v6xhO9EhAjblN0tqS38G59t02ShKeCzU2Kh+SDE9z0GAUGxGPKaLS4F2aqVudcRENb8CIhovgeSMl/VwdQWbOPOl5yPvivs25b2MWjKJOu3hTX+AgZ5PpvL0NSkAAAAAElFTkSuQmCC\"","export function createMarkup(data) {\n    return data.hits\n    .map(\n        el => \n        `<div class=\"gallery-item>\n        <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n                  <img class=\"image\" src=\"${el.webformatURL}\" alt=\"${el.tags}\" />\n        </a>\n        <div class=\"gallery-item-info\">\n                  <p class=\"gallery-info\">\n                      <span class=\"item-info\">Likes: <span class =\"span\">${el.likes}</span></span>    \n                  </p>\n                  <p class=\"gallery-info\">\n                      <span class=\"item-info\">Views: <span class =\"span\">${el.views}</span></span>    \n                  </p>\n                  <p class=\"gallery-info\">\n                      <span class=\"item-info\">Comments: <span class =\"span\">${el.comments}</span></span>    \n                  </p>\n                  <p class=\"gallery-info\">\n                      <span class=\"item-info\">Downloads: <span class =\"span\">${el.downloads}</span></span>    \n                  </p>\n              </div>\n          </div>\n    </div>`\n      )\n    .join('');\n}\n  \n  \n  \n  ","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport axios from \"axios\";\nimport iconError from '../img/icon-error.png';\n\nconst KEY = '42692881-f0d4d17361a73f053244a2051';\nconst URL = 'https://pixabay.com/api/';\n\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-btn');\nconst searchForm = document.querySelector('.search-form');\n\nexport async function searchImages(searchWord, perPage, page) {\n  \n  const LINK = `${URL}?key=${KEY}&q=${searchWord}&image_type=photo&orientation=horizontal&savesearch=true&page=${page}&per_page=${perPage}`;\n\n\n  loader.style.display = 'block';\n\n  try {\n    const response = await axios.get(LINK);\n\n    if (response.data.hits.length === 0) {\n       iziToast.error({\n          iconUrl: iconError,\n          position: 'topRight',\n          backgroundColor: '#ef4040',\n          titleColor: '#FFFFFF',\n          messageColor: '#FFFFFF',\n          theme: 'dark',\n          maxWidth: '432px',\n          message:\n            'There are no images matching your search query. Please, enter something else!',\n        });\n      loadMoreBtn.style.display = 'none';\n      loader.style.display = 'none';\n      searchForm.reset()\n    }\n    return response.data;\n\n  } catch (error) {\n    console.error(`Error: ${error}`);\n  } \n}\n\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iconError from '../src/img/icon-error.png';\n\nimport { createMarkup } from \"./js/render-functions.js\";\nimport { searchImages } from \"./js/pixabay-api.js\";\n\nconst lightbox = new SimpleLightbox('.gallery div', {\n  nav: true,\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 150,\n});\n\nconst searchForm = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-btn');\n\nsearchForm.addEventListener('submit', handleSearch);\nloader.style.display = 'none';\nloadMoreBtn.style.display = 'none';\n\nlet currentPage;\nlet currentQuery;\nlet totalHits;\n\n\nasync function handleSearch(event) {\n  event.preventDefault();\n  loader.style.display = 'block';\n  gallery.innerHTML = '';\n\n  \n  const form = event.currentTarget;\n  const searchWord = form.elements.searchWord.value.trim();\n\n  if (searchWord === '') {\n    iziToast.error({\n      iconUrl: iconError,\n      titleColor: '#FFFFFF',\n      backgroundColor: '#ef4040',\n      position: 'topRight',\n      messageColor: '#FFFFFF',\n      message: 'Please search for something',\n    });\n    loader.style.display = 'none';\n    return;\n  }\n\n  try {\n    const arr = await searchImages(searchWord, 15, 1);\n    totalHits = arr.totalHits;\n    gallery.innerHTML = createMarkup(arr);\n    currentQuery = searchWord;\n    currentPage = 1;\n    lightbox.refresh();\n    toggleLoadBtnVisibility();\n  } catch (error) {\n    console.error('Error:', error);\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n\nloadMoreBtn.addEventListener('click', async (event) => {\n  loader.style.display = 'block';\n  currentPage += 1;\n\n  try {\n    const data = await searchImages(currentQuery, 15, currentPage);\n\n    if (currentPage * 15 < totalHits) {\n      gallery.innerHTML += createMarkup(data);\n      lightbox.refresh();\n      smoothScroll();\n    } else {\n      loadMoreBtn.style.display = 'none';\n      iziToast.show({\n        title: 'info',\n        titleColor: '#FFFFFF',\n        backgroundColor: '#6C8CFF',\n        position: 'topRight',\n        messageColor: '#FFFFFF',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    console.error('Error:', error);\n    alert(error.message);\n  } finally {\n    loader.style.display = 'none';\n  }\n});\n\nfunction smoothScroll() {\n  const galleryHeight = gallery.firstElementChild.getBoundingClientRect().height;\n  window.scrollBy({\n    top: 2 * galleryHeight,\n    behavior: 'smooth'\n  });\n}\n\nfunction toggleLoadBtnVisibility() {\n  if (gallery.querySelector('img')) {\n    loadMoreBtn.style.display = 'block';\n  } else {\n    loadMoreBtn.style.display = 'none';\n  }\n}\n\n"],"names":["iconError","createMarkup","data","el","KEY","URL","loader","loadMoreBtn","searchForm","searchImages","searchWord","perPage","page","LINK","response","axios","iziToast","error","lightbox","SimpleLightbox","gallery","handleSearch","currentPage","currentQuery","totalHits","event","arr","toggleLoadBtnVisibility","smoothScroll","galleryHeight"],"mappings":"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"}